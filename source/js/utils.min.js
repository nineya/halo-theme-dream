(()=>{class e{constructor(e,n){this.name=e,this.fileName=n}}const t=[new e("呵呵","hehe"),new e("哈哈","haha"),new e("吐舌","tushe"),new e("啊","a"),new e("酷","ku"),new e("怒","nu"),new e("开心","kaixin"),new e("汗","han"),new e("泪","lei"),new e("黑线","heixian"),new e("鄙视","bishi"),new e("不高兴","bugaoxing"),new e("真棒","zhenbang"),new e("钱","qian"),new e("疑问","yiwen"),new e("阴险","yingxiang"),new e("吐","tu"),new e("咦","yi"),new e("委屈","weiqu"),new e("花心","huaxin"),new e("呼~","hu"),new e("笑眼","xiaoyan"),new e("冷","len"),new e("太开心","taikaixin"),new e("滑稽","huaji"),new e("勉强","mianqiang"),new e("狂汗","kuanhan"),new e("乖","guai"),new e("睡觉","shuijiao"),new e("惊哭","jingku"),new e("生气","shengqi"),new e("惊讶","jingya"),new e("喷","pen"),new e("突然兴奋","turanxingfen"),new e("挖鼻","wabi"),new e("摊手","tanshou"),new e("捂嘴笑","wuzuixiao"),new e("喝酒","hejiu"),new e("犀利","xili"),new e("懒得理","landeli"),new e("炸药","zhayao"),new e("吃瓜","chigua"),new e("小乖","xiaoguai"),new e("你懂的","nidongde"),new e("嘿嘿嘿","heiheihei"),new e("欢呼","huanhu"),new e("笑尿","xiaoniao"),new e("酸爽","suanshuang"),new e("紧张","jinzhang"),new e("暗中观察","anzhongguancha"),new e("小红脸","xiaohonglian"),new e("呀咩爹","yamiedie"),new e("微微一笑","weiweiyixiao"),new e("what","what"),new e("托腮","tuosai"),new e("噗","pu"),new e("困成狗","kunchenggou"),new e("柯基暗中观察","kejianzhongguancha"),new e("菜狗","caigou"),new e("老虎","laohu"),new e("嗷呜","aowu"),new e("奥特曼","aoteman"),new e("黑头高兴","heitougaoxing"),new e("黑头瞪眼","heitoudengyan"),new e("望远镜","wangyuanjing"),new e("不听","butin"),new e("干饭","ganfan"),new e("大拇指","damuzhi"),new e("胜利","shengli"),new e("haha","haha2"),new e("OK","ok"),new e("红领巾","honglingjin"),new e("爱心","aixin"),new e("心碎","xinsui"),new e("玫瑰","meigui"),new e("礼物","liwu"),new e("烟花","yanhua"),new e("彩虹","caihong"),new e("太阳","taiyang"),new e("星星月亮","xingxingyueliang"),new e("蛋糕","dangao"),new e("茶杯","chabei"),new e("香蕉","xiangjiao"),new e("便便","bianbian"),new e("药丸","yaowan"),new e("钱币","qianbi"),new e("蜡烛","lazhu"),new e("沙发","shafa"),new e("音乐","yinyue"),new e("灯泡","dengpao"),new e("手纸","shouzhi")],a={isMobile:()=>!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)),cachedScript:(e,n)=>$.ajax(jQuery.extend({url:e,type:"get",dataType:"script",cache:!0,success:n},$.isPlainObject(e)&&e)),formatDate(e,n="yyyy-MM-dd"){e=new Date(e),/(y+)/.test(n)&&(n=n.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));var a,t,i={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(a in i)new RegExp(`(${a})`).test(n)&&(t=i[a]+"",n=n.replace(RegExp.$1,1===RegExp.$1.length?t:t.padStart(2,"0")));return n},getUrlParams(){var e=location.search,e=(e="string"!=typeof e?e.toString():e).replace(/^[^\?]*\?/i,"").split(/&/),a={};return e.length<1||Array.isArray(e)&&e.forEach(function(e){if(!e)return!1;var n,e=e.split(/=/);2<=e.length&&(n=e.splice(0,1),a[n]=e.join("="))}),a},randomColor(e){var n=["#F8D800","#0396FF","#EA5455","#7367F0","#32CCBC","#F6416C","#28C76F","#9F44D3","#F55555","#736EFE","#E96D71","#DE4313","#D939CD","#4C83FF","#F072B6","#C346C2","#5961F9","#FD6585","#465EFB","#FFC600","#FA742B","#5151E5","#BB4E75","#FF52E5","#49C628","#00EAFF","#F067B4","#F067B4","#ff9a9e","#00f2fe","#4facfe","#f093fb","#6fa3ef","#bc99c4","#46c47c","#f9bb3c","#e8583d","#f68e5f"];return n[e%n.length]},request:({url:e="",method:t="GET",data:i,headers:o={},timeout:r=1e4,returnRaw:s=!1})=>new Promise((n,a)=>{t=t.toUpperCase(),$.ajax({url:e,type:t,headers:{"API-Authorization":DreamConfig.access_key||"dream",...o},async:!0,dataType:"json",timeout:r,data:i,success(e){s?n(e):200===e.status?n(e.data||""):a(e)},error(e){e=e&&e.responseJSON?e.responseJSON.message:"请求失败";Qmsg.error(e),a(e)}})}),initLikeButton(e,n){n=encrypt("agree-"+n);let a=localStorage.getItem(n);a=a?JSON.parse(decrypt(a)):[],$(e).each(function(){var e=$(this),n=e.attr("data-id");a.includes(n)&&e.removeClass("like")})},initLikeEvent(e,n,o){let r=encrypt("agree-"+n);$("body").on("click",e,function(e){e.stopPropagation();let t=$(this),i=t.attr("data-id");a.request({url:"/api/content/"+n+"/"+i+"/likes",method:"POST"}).then(e=>{var n=(n=localStorage.getItem(r))?JSON.parse(decrypt(n)):[],a=+(t.attr("data-likes")||0)+1,n=(n.push(i),t.removeClass("like"),encrypt(JSON.stringify(n)));localStorage.setItem(r,n),o(t).html(a),Qmsg.success("点赞成功")})})},baiduPush(){var e=document.createElement("script"),n=window.location.protocol.split(":")[0],n=(e.src="https"===n?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js",$(`script[src="${e.src}"]`).remove(),document.getElementsByTagName("script")[0]);n.parentNode.insertBefore(e,n)},toutiaoPush(){var e=document.createElement("script"),n=(e.src="https://lf1-cdn-tos.bytegoofy.com/goofy/ttzz/push.js?0fbcfbb1ed642c21419d5be02d56ade7d6ee5372ca221d12ba35df110760b2a830632485602430134f60bc55ca391050b680e2741bf7233a8f1da9902314a3fa",e.id="ttzz",$(`script[src="${e.src}"]`).remove(),document.getElementsByTagName("script")[0]);n.parentNode.insertBefore(e,n)},sleep:(n=250)=>new Promise(e=>setTimeout(e,n)),foldBlock(e){var n,a=e.height();e.is(".fold")?e.removeClass("fold").addClass("unfold"):(n=document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset,e.addClass("fold").removeClass("unfold"),$("body,html").scrollTop(n-a+e.height()))},removeClassByPrefix(e,n){var a=e.className.split(" ").filter(function(e){return 0!==e.lastIndexOf(n,0)});e.className=a.join(" ").trim()},animateScroll(e,n,a,t){let i,o=e.getBoundingClientRect(),r=window.scrollY,s=r+o.top-a,w=(s-r)/n,c=r>s?-1:1;i=window.requestAnimationFrame(function e(){(r+=w)*c<s*c?(window.scrollTo(0,r),i=window.requestAnimationFrame(e)):(window.scrollTo(0,s),window.cancelAnimationFrame(i),t&&t())})},renderedEmojiHtml(e){for(var n of t){var a=n.name,n=`<img class="dream-emoji" src="/themes/dream/source/lib/halo-comment@1.1.7/assets/emoji/${n.fileName}.png" alt="${a}"/>`;e=e.replace(new RegExp(`\\[/${a}\\]`,"gm"),n)}return e.replace(/\!\[[^\]]*\]\([^)]*\)/g,"[图片内容]").replace(/```\w*\n[^`]*\n```/g,"[代码块内容]").replace(/`([^`]*)`/g,"$1").replace(/\[([^\]]*)\]\([^)]*\)/g,"$1").replace(/^#+\s+([^\n]*)/gm,"$1").replace("\n"," ")}};window.Utils=a})();